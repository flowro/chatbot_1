from bs4 import BeautifulSoup
import json

def html_table_to_json(html):
    soup = BeautifulSoup(html, 'html.parser')
    table = soup.find('table')  # Find the table element
    
    headers = []
    rows = []
    
    # Extract table headers
    for th in table.find_all('th'):
        headers.append(th.text.strip())
    
    # Extract table rows and cells
    for tr in table.find_all('tr'):
        row = {}
        for index, td in enumerate(tr.find_all('td')):
            row[headers[index]] = td.text.strip()
        rows.append(row)
    
    return json.dumps(rows)
    
    
    function displayBotResponse(response) {
    var messageContainer = document.createElement('div');
    messageContainer.classList.add('message-container');
    var botMessage = document.createElement('div');
    botMessage.classList.add('bot-message');
    messageContainer.appendChild(botMessage);
    $('#chatbox').append(messageContainer);
    
    if (response.startsWith("<html>") && response.endsWith("</html>")) {
        // If the response is HTML code, create an iframe to render it
        var iframe = document.createElement('iframe');
        iframe.srcdoc = response;
        iframe.style.width = '100%';
        iframe.style.height = '300px'; // Set the desired height
        botMessage.appendChild(iframe);
    } else {
        // Otherwise, treat it as plain text and apply the typewriter animation
        typeMessage('Bot: ', botMessage, function() {
            typeMessage(response, botMessage);
        });
    }
}
